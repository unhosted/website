<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>A minimal remoteStorage demo</title>
    <script src="../../remoteStorage-staging.js"></script>
    <script>
      function displayText() {
        if(remoteStorage.getItem('text') == null) {//first use
          document.getElementById('text').value = 'This is a remoteStorage demo.\n\n'
            + 'Try to log in on the top right with your remote storage user address.\n'
            + 'Or just use test@yourremotestorage.com (user: test, password: unhosted)\n'
            + 'to try it out.\n'
            + 'You will be redirected to the remote storage where you have to authorize this\n'
            + 'app to store data on your remote storage.\n\n'
            + 'Happy writing!\n';
        } else {
          document.getElementById('text').value=remoteStorage.getItem('text');
        }
      }
      function onbodyload() {
        window.remoteStorage.init(
          { dataScope: 'documents',
          , type: private
          , onChange: function(key, oldValue, newValue) {
              if(key=='text') {
                displayText();
              }
            }
          , preferBrowserSessionIfNative: false,
          , preferBrowserIdIfNative: false,
          , preferBrowserIdAlways: false,
          });
        displayText();
      }
    </script>
    <style>* { padding:0; margin:0; border:0; outline:0; } html { overflow-x:hidden; overflow-y:hidden; }
    textarea { position:absolute; padding:10% 20%; font:2em FreeSans,Helvetica,sans-serif; color:#333; background:#eee; text-shadow:0 0 1px #666677; width:60%; height:80%; overflow-x:hidden; overflow-y:auto; resize:none; }</style>
  </head>
  <body onload="onbodyload();">
    <textarea id="text" onkeyup="remoteStorage.setItem('text', this.value);" autofocus></textarea>
  </body>
</html>
